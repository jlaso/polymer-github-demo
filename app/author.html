<!doctype html>
<html>

<head>

  <title>unquote</title>

  <meta name="viewport"
  content="width=device-width, minimum-scale=1.0, initial-scale=1.0, user-scalable=yes">

  <link rel="stylesheet" href="app.css">

  <script src="../components/platform/platform.js"></script>

  <link rel="import" href="../components/font-roboto/roboto.html">
  <link rel="import" href="../components/core-header-panel/core-header-panel.html">
  <link rel="import" href="author-details.html">
  <link rel="import" href="../ajax-service/user-service.html">

  <script>
    function getSearchParameters() {
          var prmstr = window.location.search.substr(1);
          return prmstr != null && prmstr != "" ? transformToAssocArray(prmstr) : {};
    }

    function transformToAssocArray( prmstr ) {
        var params = {};
        var prmarr = prmstr.split("&");
        for ( var i = 0; i < prmarr.length; i++) {
            var tmparr = prmarr[i].split("=");
            params[tmparr[0]] = tmparr[1];
        }
        return params;
    }

    var params = getSearchParameters();
  </script>
</head>

<body unresolved fullbleed layout vertical>

  <user-service id="user-service" user="{{user}}" username="{{params['name'}}">
  </user-service>

  <div class="container" layout vertical center>

      <h1>Details for <span id="author">{{params['name']}}</span></h1>

      <author-details>
          <img src="{{user.avatar_url}}" width="70" height="70">
          <h2>({{user.id}}) {{user.login}}</h2>
          <name>{{user.name}}</name>
          <company>{{user.company}}</company>
          <location>{{user.location}}</location>
          <email>{{user.email}}</email>
          <bio>{{user.bio}}</bio>
          <public-repos>{{user.public_repos}}</public-repos>
      </author-details>

  </div>

</body>

  <script src="app.js"></script>

  <script>
      var author_name = params['name'];
      if(author_name){
        //document.querySelector('#author').innerHTML = params['name'];
        //document.querySelector('#user-service').setAttribute("username", author_name);
      }
  </script>

</html>
